TLP_ENABLE=1

# --- CPU Settings ---
# Let the amd-pstate driver use its default mode (usually 'active' on modern
# kernels, which is recommended). We will control policy via the EPP setting.
# CPU_DRIVER_OPMODE_ON_AC=
# CPU_DRIVER_OPMODE_ON_BAT=

# Let the kernel's scheduler handle frequency scaling. We will use
# CPU_ENERGY_PERF_POLICY for fine-tuning. This is more effective.
# CPU_SCALING_GOVERNOR_ON_AC=
# CPU_SCALING_GOVERNOR_ON_BAT=

# Use Energy Performance Policy (EPP) for modern AMD CPUs.
# 'performance' on AC for full speed.
# 'power' on BAT for maximum battery life.
CPU_ENERGY_PERF_POLICY_ON_AC=power
CPU_ENERGY_PERF_POLICY_ON_BAT=power

# Allow CPU to boost on AC, but disable on battery to save significant power.
CPU_BOOST_ON_AC=0
CPU_BOOST_ON_BAT=0

# Kernel NMI Watchdog - disabling saves a little power.
NMI_WATCHDOG=0

# --- Platform Profile ---
# This setting can conflict with power-profiles-daemon.
# If you use TLP, make sure power-profiles-daemon is disabled:
# sudo systemctl disable --now power-profiles-daemon
PLATFORM_PROFILE_ON_AC=low-power
PLATFORM_PROFILE_ON_BAT=low-power

# --- Suspend Settings ---
# 'deep' sleep saves more power than 's2idle' during suspend.
# If you have problems waking from sleep, change 'deep' back to 's2idle'.
MEM_SLEEP_ON_AC=s2idle
MEM_SLEEP_ON_BAT=deep

# --- Disk Settings ---
# The following settings are for spinning HDDs and are not needed for NVMe SSDs.
# DISK_IDLE_SECS_ON_AC=
# DISK_IDLE_SECS_ON_BAT=
# DISK_APM_LEVEL_ON_AC=
# DISK_APM_LEVEL_ON_BAT=

# Runtime Power Management for NVMe/SATA. 'auto' on battery is good.
AHCI_RUNTIME_PM_ON_AC=on
AHCI_RUNTIME_PM_ON_BAT=auto
AHCI_RUNTIME_PM_TIMEOUT=15

# --- Graphics Settings ---
# For your integrated AMD Radeon Graphics.
# 'auto' on AC, and 'low' on battery to save power.
RADEON_DPM_PERF_LEVEL_ON_AC=low
RADEON_DPM_PERF_LEVEL_ON_BAT=low

# --- PCIe & Runtime PM ---
# Aggressive power saving for PCIe bus devices.
PCIE_ASPM_ON_AC=powersupersave
PCIE_ASPM_ON_BAT=powersupersave

# Enable runtime power management for most devices on battery.
RUNTIME_PM_ON_AC=on
RUNTIME_PM_ON_BAT=on

# --- Radio Devices (Wi-Fi, Bluetooth) ---
# Enable Wi-Fi power saving mode when on battery.
WIFI_PWR_ON_AC=on
WIFI_PWR_ON_BAT=on

# Disable Bluetooth on startup to save power. Re-enable if you always need it.
DEVICES_TO_DISABLE_ON_STARTUP="bluetooth"

# Optional: Disable Wi-Fi if you connect an ethernet cable.
# DEVICES_TO_DISABLE_ON_LAN_CONNECT="wifi"

# --- Sound ---
# Enable audio power saving. 1 second is a good default.
SOUND_POWER_SAVE_ON_AC=1
SOUND_POWER_SAVE_ON_BAT=1
SOUND_POWER_SAVE_CONTROLLER=Y

# --- USB ---
# Enable USB autosuspend for devices that support it.
USB_AUTOSUSPEND=1
# By default, TLP is smart about not suspending input devices like mice/keyboards.
# You can add device IDs to USB_DENYLIST if a specific device causes issues.
# USB_DENYLIST=""

# --- Battery Care ---
# Начать зарядку при уровне заряда ниже 75%
START_CHARGE_THRESH_BAT0=75
# Прекратить зарядку при достижении 80%
STOP_CHARGE_THRESH_BAT0=80
